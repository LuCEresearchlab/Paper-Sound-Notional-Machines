\section{Evaluation}
\label{chr:Evaluation}

%We then
%evaluate the entire framework
%by comparing the notional machines that appeared
%in Section~\ref{chr:Modeling} and Section~\ref{chr:RevealingInconsistencies}
%to an existing dataset of \numOfNMs notional machines.
%
%We classify the notional machines in the dataset according to various dimensions and show that the notional machines we analyzed are representative of the design space of notional machines used in practice.

\begin{wrapfigure}{r}{.50\textwidth}
%\begin{table}[]
\begin{tabular}{|l||r|r|l|}
\hline
\textbf{Form}  & \textbf{Num} & \textbf{Perc.} & \textbf{Covered} \\
\hline
\hline
Metaphorical  &  22  &  56.41\% & \ref{sec:ListAsStack} \ref{sec:ArrayAsParkingSpots} \ref{sec:AlligatorEggs} \\ \hline
Diagramatic  &  16  &  41.03\% & \ref{sec:ExpTree} \ref{sec:ExpTutor} \ref{sec:State} \ref{sec:Typing} \\ \hline
Both  &  1  &  2.56\% & - \\ \hline
\hline
\textbf{Total} & \numOfNMs    & 100.00\%   & -   \\
\hline
\end{tabular}
\captionof{table}{Notional machines in the dataset published by \citet{fincherNotionalMachinesComputing2020} classified according to their form.}
\label{tab:nm-classification-form}
%\end{table}
\end{wrapfigure}


The notional machines we presented so far,
are meant not only to exemplify how to use our framework to reason about notional machines
but also were chosen to be representative of the design space of notional machines used in practice.
%
To characterize this design space we analyzed the notional machines in the dataset captured by~\citet{fincherNotionalMachinesComputing2020}
and classified them according to three dimensions: form, focus, and language construct.
%
For each dimension,
we present the values (the categories) of the dimension
and for each category
we show
the number of notional machines in that category,
the percentage that number represents of the total,
and
the sections of the paper containing notional machines that fall into that category.
%
The notional machines are often not precesily described
so we had to often make assumptions about
their characteristics,
how they relate to an underlying programming language,
and how they are used to teach programming concepts.

%
According to their form (Table~\ref{tab:nm-classification-form}),
a notional machine
can be
metaphorical (primarely inspired by and represented with real world objects) or
diagrammatic (represented with diagrams).
The distinction between the two is not always clear-cut,
given that
a notional machine may mix both forms
and
some real world objects can be represented diagrammatically.
%
Nevertheless, this distinction is useful because metaphorical notional machines may be more difficult to be made sound, given the existing degrees of freedom and constraints of the real world objects they are inspired by.


Most notional machines in the dataset focus (Table~\ref{tab:nm-classification-broad-focus})
on the runtime semantics (Evaluation) of a programming language construct
(or set of conceptually related constructs)
so
%
we further
broke down these notional machines into the constructs (or set of constructs) they are primarely focused on (Table~\ref{tab:nm-classification-narrow-focus}).
%
%\nmName{TAPLMemoryDiagram} (Section~\ref{sec:State}),
%for example,
%represents the runtime semantics of all constructs of \plName{TypedLambdaRef}
%but would be classified as primarely focused on references.
%
Here the classification is also not clear-cut,
not only because a notional machine may focus on multiple constructs
but also because some constructs a related to others.
For example,
notional machines that focus on functions often (although not always) represent variables as well
but only the ones that solely (or primarily) focus on variables are classified as such.
The category control flow encompasses constructs like loops and conditional statements, which primarily affect control flow.
%
The category misc
Includes five notional machines each of which focuses on a different construct:
string literal,
Procedure (side-effecting functions),
objects,
instructions (lower level operations),
and
one that is not clear from the description.

%todo evaluation is a leap of faith...

\begin{table}[h]
    \centering
    \begin{minipage}{0.45\textwidth}
        \centering
        \begin{tabular}{|l||r|r|p{1.4cm}|}
\hline
\textbf{Focus} & \textbf{Num} & \textbf{Perc.} & \textbf{Covered} \\
\hline
\hline
Evaluation  &  32  &  82.05\% & \ref{sec:ExpTree} \ref{sec:ExpTutor} \ref{sec:State} \ref{sec:ArrayAsParkingSpots} \ref{sec:AlligatorEggs} \\ \hline
Type-checking  &  2  &  5.13\% &  \ref{sec:Typing} \\ \hline
Parsing  &  2  &  5.13\% & no \\ \hline
Data Structure  &  2  &  5.13\% &  \ref{sec:ListAsStack} \\ \hline
Logic Gates  &  1  &  2.56\% & no \\ \hline
\hline
\textbf{Total} & \numOfNMs    & 100.00\%  & -   \\
\hline
\end{tabular}
\caption{Notional machines in the dataset published by \citet{fincherNotionalMachinesComputing2020} classified according to their broad focus.}
\label{tab:nm-classification-broad-focus}
    \end{minipage}\hfill
    \begin{minipage}{0.45\textwidth}
        \centering
\begin{tabular}{|l||r|r|l|}
\hline
\textbf{Construct} & \textbf{Num} & \textbf{Perc.} & \textbf{Covered} \\
\hline
\hline
References  &  8  &  20.51\% & \ref{sec:State} \\ \hline
Functions  &  5  &  12.82\% & \ref{sec:ExpTree} \ref{sec:ExpTutor} \\ \hline
Variables  &  4  &  10.26\% & \ref{sec:ExpTree} \ref{sec:ExpTutor} \ref{sec:State} \\ \hline
Arrays  &  4  &  10.26\% & \ref{sec:ArrayAsParkingSpots} \\ \hline
Methods  &  3  &  7.69\% & no \\ \hline
Control Flow  &  2  &  5.13\% & no \\ \hline
Expressions  &  1  &  2.56\% & \ref{sec:ExpTree} \ref{sec:ExpTutor} \\ \hline
\hline
Misc  &  5  &  12.82\% & no \\ \hline
%Memory          & 7     & 18.92\%   & yes \\ \hline
%Variables       & 5     & 13.51\%   & yes \\ \hline
%Arrays          & 4     & 10.81\%   & yes \\ \hline
%Functions       & 3     & 8.11\%    & yes \\ \hline
%Expression      & 3     & 8.11\%    & yes \\ \hline
%Method Calls    & 2     & 5.41\%    & no  \\ \hline
%Control Flow    & 2     & 5.41\%    & no  \\ \hline
%Call Stack      & 2     & 5.41\%    & no  \\ \hline
%??              & 2     & 5.41\%    & -   \\ \hline
%Tracing         & 1     & 2.70\%    & no  \\ \hline
%Recursion       & 1     & 2.70\%    & yes \\ \hline
%Parsing         & 1     & 2.70\%    & yes \\ \hline
%Objects         & 1     & 2.70\%    & no  \\ \hline
%Logic Operation & 1     & 2.70\%    & no  \\ \hline
%List            & 1     & 2.70\%    & yes \\ \hline
%HashSets        & 1     & 2.70\%    & no  \\ \hline
\hline
\textbf{Total} & 32    & 82.05\%   & -   \\
\hline
\end{tabular}
\caption{Notional machines in the dataset published by \citet{fincherNotionalMachinesComputing2020} classified according to their narrow focus.}
\label{tab:nm-classification-narrow-focus}
    \end{minipage}
\end{table}





%todo: cut values 1 and 2 and explain in text

%We then classified the notion of machines shown in Section~\ref{chr:Modeling} and Section~\ref{chr:RevealingInconsistencies} according to these dimensions.
%
%\begin{table}[]
%\begin{tabular}{|l||l|l|l|}
%\hline
%\textbf{Notional Machine}      & \textbf{Form} & \textbf{Broad Focus} & \textbf{Focused Construct} \\ \hline
%\hline
%\hline
%Array a Row of Parkings Spaces & Analogy        & Evaluation     & Arrays       \\ \hline
%List a Stack of Boxes          & Analogy        & Data Structure & List         \\ \hline
%ExpTree                        & Representation & Evaluation     & -            \\ \hline
%ExpTutorDiagram                & Representation & Evaluation     & -            \\ \hline
%TAPLMemoryDiagram              & Representation & Evaluation     & References   \\ \hline
%TypedExpTutorDiagram           & Representation & Type-checking  & -            \\ \hline
%AlligatorEggs                  & Analogy        & Evaluation     & -            \\ \hline
%\end{tabular}
%\caption{Notional machines analyzed in this paper classified according to dare form, broad focus, and narrow focus.}
%\label{tab:our-nm-classification}
%\end{table}

\subsection{Expressing Complex Language Semantics}
\label{sec:more-complexity}

% - modeling layers
Although
the notional machines presented here as well as in the dataset by \citet{fincherNotionalMachinesComputing2020}
focus on aspects of program semantics that one may consider simple,
the framework we presented can be used to reason about more complex aspects of program semantics.
%
An example
is
the conceptual models
to reason about Ownership Types in Rust by~\citet{crichtonGroundedConceptualModel2023}.
% fits nicely in our framework
The authors present two models: a dynamic and a static.
In our framework,
each model can be seen as a notional machine.
The authors divide each model into a formal model (about which formal statements can be made), which would correspond to the abstract representation of the notional machine,
and an informal model, which would correspond to the concrete representation of the notional machine.
%
In the dynamic model,
our PL layer would be the Rust language
and
our NM layer would be Miri.
%
In the static model,
our PL layer would be the Polonius model of borrow checking
and
our NM layer would be the \emph{permissions model} of borrow checking
(introduced by the authors).

